<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ê²½ì‚¬ ì •ë³´ ì œì¶œ</title>
  <style>
    :root {
      --fg: #111; --muted:#666; --border:#ddd; --ok:#0a0; --err:#c00;
    }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--fg); margin:24px; }
    .card { max-width: 640px; margin: 0 auto; padding: 20px; border: 1px solid var(--border); border-radius: 12px; }
    h2 { margin:0 0 12px; }
    label { display:block; margin:12px 0 4px; font-weight:600; }
    input, select, textarea {
      width:100%; padding:10px; border:1px solid #ccc; border-radius:8px; font:inherit;
      box-sizing:border-box;
    }
    textarea { min-height: 80px; }
    .row { display:flex; gap:8px; }
    .btn { padding:12px 16px; border:0; border-radius:8px; cursor:pointer; }
    .btn.primary { background:#111; color:#fff; }
    .hint { color:var(--muted); font-size:12px; margin-top:4px; }
    .success { color:var(--ok); margin-top:12px; }
    .error { color:var(--err); margin-top:12px; }
    .hidden { display:none; }
    .consent-line { display:flex; align-items:center; gap:8px; margin-top:8px; white-space:nowrap; }
    .consent-line input[type="checkbox"] { margin:0; }
    /* ê²Œì‹œíŒ ë¯¸ë¦¬ë³´ê¸° ë°•ìŠ¤ */
    #previewBox { margin-top:20px; }
    #previewText { white-space:pre-wrap; border:1px solid #ccc; padding:12px; border-radius:8px; background:#f9f9f9; }
  </style>
</head>
<body>
  <div class="card">
    <h2>ê²½ì‚¬ ì •ë³´ ì œì¶œ</h2>

    <!-- ê°œì¸ì •ë³´ ìˆ˜ì§‘ ê³ ì§€ -->
    <script>
      alert(
        "ë³¸ ì„¤ë¬¸ì€ MXì‚¬ì—…ë¶€ ì„ì› ê²½ì¡°ì‚¬ ê²Œì‹œë¥¼ ìœ„í•´ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.\n" +
        "ìˆ˜ì§‘ëœ ì •ë³´ëŠ” ê²½ì¡°ì‚¬ ì•ˆë‚´ ëª©ì ì— ì‚¬ìš©ë©ë‹ˆë‹¤.\n" +
        "ê·€í•˜ëŠ” ë™ì˜ë¥¼ ê±°ë¶€í•  ê¶Œë¦¬ê°€ ìˆìœ¼ë©°, ë™ì˜ ê±°ë¶€ ì‹œ ì•ˆë‚´ ì œê³µì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n"+
        "- ìˆ˜ì§‘ í•­ëª©: ì„±ëª…, ì¬ì§ì—¬ë¶€, ë¶€ì„œ, ê²½ì¡°ì‚¬ êµ¬ë¶„, ê´€ê³„, ê³„ì¢Œë²ˆí˜¸(ë³¸ì¸), ì—°ë½ì²˜ ë“±\n" +
        "- ë‹´ë‹¹ë¶€ì„œ: MX PeopleíŒ€ / ë¬¸ì˜: mobile.ga@samsung.com"
      );
    </script>

    <form id="form">
      <!-- ì„±ëª… / ì¬ì§ -->
      <label>ì„±ëª… *</label>
      <input name="name" required />

      <label>ì¬ì§/í‡´ì§ *</label>
      <select name="empStatus" required>
        <option value="">ì„ íƒ</option>
        <option>ì¬ì§</option>
        <option>í‡´ì§</option>
      </select>

      <label>ê·¼ë¬´ ë¶€ì„œ *<span class="hint">(ì¬ì§ ì‹œ)</span></label>
      <input name="deptWhenEmployed" required placeholder="â—‹â—‹ê°œë°œ3ê·¸ë£¹(ë¬´ì„ )" />

      <label>í˜„ ì§ì¥/ì§ì±… *</label>
      <input name="currentJobTitle" required />

      <label>ì²­íƒê¸ˆì§€ë²• ì ìš© ì—¬ë¶€(ë°°ìš°ì í¬í•¨) *</label>
      <select name="antiGraft" required>
        <option value="">ì„ íƒ</option>
        <option>ëŒ€ìƒ</option>
        <option>ë¹„ëŒ€ìƒ</option>
      </select>

      <!-- ì‹ ë‘/ì‹ ë¶€ì¸¡ -->
      <label>ì‹ ë‘/ì‹ ë¶€ì¸¡ *</label>
      <div class="row">
        <label><input type="radio" name="side" value="groom" required> ì‹ ë‘ì¸¡</label>
        <label><input type="radio" name="side" value="bride" required> ì‹ ë¶€ì¸¡</label>
      </div>

      <!-- ê°€ì¡± ì •ë³´ -->
      <label>ì‹ ë‘ ì•„ë²„ì§€ ì„±í•¨ *</label>
      <input name="groomFather" required />
      <label>ì‹ ë‘ ì–´ë¨¸ë‹ˆ ì„±í•¨ *</label>
      <input name="groomMother" required />
      <label>ì‹ ë‘ ì´ë¦„ *</label>
      <input name="groomName" required />

      <label>ì‹ ë¶€ ì•„ë²„ì§€ ì„±í•¨ *</label>
      <input name="brideFather" required />
      <label>ì‹ ë¶€ ì–´ë¨¸ë‹ˆ ì„±í•¨ *</label>
      <input name="brideMother" required />
      <label>ì‹ ë¶€ ì´ë¦„ *</label>
      <input name="brideName" required />

      <!-- í˜•ì œ/ìë§¤ ìˆœì„œ -->
      <label>í˜•ì œ/ìë§¤ ìˆœì„œ *</label>
      <select name="order" id="order" required>
        <option value="">ì„ íƒ</option>
        <option>ì¥ë‚¨</option><option>ì°¨ë‚¨</option><option>ì‚¼ë‚¨</option>
        <option>ì¥ë…€</option><option>ì°¨ë…€</option><option>ì‚¼ë…€</option>
        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
      </select>
      <input type="text" name="orderEtc" id="orderEtc" class="hidden" placeholder="ê¸°íƒ€ (ì§ì ‘ ì…ë ¥)" />

      <!-- ê³„ì¢Œ / ì€í–‰ -->
      <label>ì¶•ì˜ê³„ì¢Œ * <span class="hint">(ë³¸ì¸ ê³„ì¢Œ)</span></label>
      <input name="bankNumber" required placeholder="000-0000-0000-00" />

      <label>ì€í–‰ *</label>
      <select name="bankName" required>
        <option value="">ì„ íƒ</option>
        <option>êµ­ë¯¼</option><option>ì‹ í•œ</option><option>ìš°ë¦¬</option>
        <option>í•˜ë‚˜</option><option>ë†í˜‘</option><option>ê¸°ì—…</option>
        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
      </select>

      <label>ì—°ë½ì²˜ *</label>
      <input id="phone" name="phone" required placeholder="010-1234-5678" />

      <!-- ì˜ˆì‹ì¼ì‹œ -->
      <label>ì˜ˆì‹ì¼ì‹œ *</label>
      <div class="row">
        <input type="date" id="eventDate" name="eventDate" required />
        <input type="time" id="eventTime" name="eventTime" step="600" required />
      </div>

      <!-- ì‹ì¥ -->
      <label>ì‹ì¥ ì£¼ì†Œ *</label>
      <input id="venueAddr" name="venueAddr" required placeholder="ë„ë¡œëª… ì£¼ì†Œ" />

      <label>ì‹ì¥(ìƒì„¸) *</label>
      <input name="venue" required placeholder="ì˜ˆ: â—‹â—‹ì›¨ë”©í™€ 3ì¸µ â—‹â—‹í™€" />

      <div class="consent-line">
        <input type="checkbox" id="consent" required />
        <label for="consent">ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤</label>
      </div>

      <button type="submit" class="btn primary">ì œì¶œ</button>
      <p id="msg"></p>
    </form>

    <!-- ğŸ“ ê²Œì‹œíŒ ì•ˆë‚´ë¬¸ ë¯¸ë¦¬ë³´ê¸° -->
    <div id="previewBox" class="hidden">
      <h3>ğŸ“ ê²Œì‹œíŒ ì•ˆë‚´ë¬¸ ë¯¸ë¦¬ë³´ê¸°</h3>
      <pre id="previewText"></pre>
    </div>
  </div>

  <script>
    // ê¸°íƒ€ ì„ íƒ ì‹œ ì…ë ¥ì¹¸ í‘œì‹œ
    const orderSel = document.getElementById('order');
    const orderEtc = document.getElementById('orderEtc');
    orderSel.addEventListener('change', () => {
      orderEtc.classList.toggle('hidden', orderSel.value !== 'ê¸°íƒ€');
    });

    const ENDPOINT = "<<<ì—¬ê¸°ì— Apps Script ì›¹ì•± URL /exec>>>";

    document.getElementById('form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const f = e.target;

      const date = document.getElementById('eventDate').value;
      const time = document.getElementById('eventTime').value;
      const eventDateTime = (date && time) ? `${date}T${time}` : '';

      const formData = new FormData(f);
      const payload = Object.fromEntries(formData.entries());
      payload.eventType = 'ê²½ì‚¬';
      payload.eventDateTime = eventDateTime;
      payload.consent = true;

      if (payload.order === 'ê¸°íƒ€') {
        payload.order = payload.orderEtc;
      }

      const msg = document.getElementById('msg');
      msg.textContent = 'ì „ì†¡ ì¤‘...'; msg.className = '';

      try {
        const res = await fetch(ENDPOINT, { 
          method: 'POST', 
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload) 
        });
        const data = await res.json();

        if (data.ok) {
          msg.textContent = 'ì œì¶œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ í™•ì¸ í›„ ì—°ë½ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.';
          msg.className = 'success';

          if (data.preview) {
            document.getElementById('previewBox').classList.remove('hidden');
            document.getElementById('previewText').textContent = data.preview;
          }

          f.reset();
          orderEtc.classList.add('hidden');
        } else {
          msg.textContent = 'ì˜¤ë¥˜: ' + (data.error || 'ì œì¶œ ì‹¤íŒ¨');
          msg.className = 'error';
        }
      } catch (err) {
        msg.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + err.message;
        msg.className = 'error';
      }
    });
  </script>
</body>
</html>
