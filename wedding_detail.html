<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ì¶”ê°€ ì •ë³´ ì…ë ¥</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:0;padding:24px;background:#f9f9f9;color:#111}
.card{max-width:720px;margin:0 auto;background:#fff;padding:24px;border-radius:16px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
h2{margin-top:0}
label{display:block;margin:12px 0 6px;font-weight:600}
input,select{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box}
.btn{padding:12px 16px;border:0;border-radius:8px;cursor:pointer;font-weight:600}
.btn.primary{background:#111;color:#fff;width:100%;margin-top:16px}
.preview{white-space:pre-wrap;border:1px solid #ddd;padding:16px;border-radius:12px;background:#fafafa;margin-top:16px;font-family:"Batang",serif;font-size:14pt}
.hidden{display:none}
</style>
</head>
<body>
<div class="card">
  <h2>ì¶”ê°€ ì •ë³´ ì…ë ¥</h2>

  <label>ì„ì› ì„±í•¨ *</label>
  <input id="name" />
  <label>ì¬ì§/í‡´ì§ *</label>
  <select id="empStatus"><option value="">ì„ íƒ</option><option>ì¬ì§</option><option>í‡´ì§</option></select>
  <label>ê·¼ë¬´ ë¶€ì„œ *</label>
  <input id="deptWhenEmployed" />
  <label>í˜„ ì§ì¥/ì§ì±… *</label>
  <input id="currentJobTitle" />
  <label>ì²­íƒê¸ˆì§€ë²• ëŒ€ìƒ ì—¬ë¶€ *</label>
  <select id="antiGraft"><option value="">ì„ íƒ</option><option>ëŒ€ìƒ</option><option>ë¹„ëŒ€ìƒ</option></select>
  <label>ì¶•ì˜ê³„ì¢Œ *</label>
  <input id="bankNumber" />
  <label>ì€í–‰ *</label>
  <select id="bankName"><option value="">ì„ íƒ</option><option>êµ­ë¯¼</option><option>ì‹ í•œ</option><option>ìš°ë¦¬</option><option>í•˜ë‚˜</option><option>ë†í˜‘</option><option>ê¸°ì—…</option></select>
  <label>ì—°ë½ì²˜ *</label>
  <input id="phone" placeholder="010-1234-5678" />
  <label>í‡´ì„ì„ì› ë¬¸ì ì•Œë¦¼ ê³„ì¢Œë²ˆí˜¸ ê³µê°œ ì—¬ë¶€ *</label>
  <select id="accountDisclosure"><option value="">ì„ íƒ</option><option>í¬ë§</option><option>ë¹„í¬ë§</option></select>

  <button class="btn primary" id="btnPreview">ê²Œì‹œê¸€ ë¯¸ë¦¬ë³´ê¸°</button>
  <div id="previewBox" class="preview hidden"></div>
  <button class="btn primary" id="btnSubmit">ì œì¶œ</button>
</div>

<script>
// ğŸŸ¢ ë³µì„± ì„±ì”¨ ì²˜ë¦¬
const compoundSurnames=["ë‚¨ê¶","í™©ë³´","ì œê°ˆ","ì‚¬ê³µ","ì„ ìš°","ì„œë¬¸","ë…ê³ ","ë™ë°©"];
function extractSurname(fatherName){
  if(!fatherName) return "";
  const firstTwo=fatherName.slice(0,2);
  if(compoundSurnames.includes(firstTwo)) return firstTwo;
  return fatherName[0];
}
function getChildName(fatherName, childName){
  if(!childName) return "";
  const surname=extractSurname(fatherName);
  if(surname && childName.startsWith(surname)){
    return childName.slice(surname.length);
  }
  return childName;
}

const invite=JSON.parse(localStorage.getItem('inviteInfo')||'{}');

// ë¯¸ë¦¬ë³´ê¸°
document.getElementById('btnPreview').addEventListener('click',()=>{
  const name=document.getElementById('name').value;
  const job=document.getElementById('currentJobTitle').value;
  const phone=document.getElementById('phone').value;
  const bank=document.getElementById('bankName').value;
  const bankNum=document.getElementById('bankNumber').value;

  const groomName=getChildName(invite.groomFather,invite.groomName);
  const brideName=getChildName(invite.brideFather,invite.brideName);

  let preview=`â–¡ ì¼ ì‹œ : ${invite.eventDate} ${invite.eventTime}\n`;
  preview+=`â–¡ ì¥ ì†Œ : ${invite.venueDetail}\n           (${invite.venueAddr})\n`;
  preview+=`â–¡ ì—°ë½ì²˜ : ${phone} (${name} ${job})\n`;
  preview+=`â–¡ ì¶•ì˜ê¸ˆ ì „ë‹¬ê³„ì¢Œ : ${bank}ì€í–‰ ${bankNum} (${name})\n\n`; // ğŸ”¹ í•œ ì¤„ ë„ìš°ê¸°

  if(invite.isSmallWedding==="ì˜ˆ"){
    preview+=`â€» ì‘ì€ ê²°í˜¼ì‹ì¸ ê´€ê³„ë¡œ ê°€ì¡± ë° ì¹œì§€ë¥¼ ì´ˆì²­í•˜ì—¬ ì§„í–‰í•˜ì˜¤ë‹ˆ ì–‘í•´ë°”ëë‹ˆë‹¤.\n`; // ğŸ”¹ ë¹ˆ ì¤„ ì—†ìŒ
  }
  if(document.getElementById('antiGraft').value==="ëŒ€ìƒ"){
    preview+=`â€» ì²­íƒê¸ˆì§€ë²• ëŒ€ìƒ\n`;
  } else if(document.getElementById('antiGraft').value==="ë¹„ëŒ€ìƒ"){
    preview+=`â€» ì²­íƒê¸ˆì§€ë²• ë¹„ëŒ€ìƒ\n`;
  }

  document.getElementById('previewBox').textContent=preview;
  document.getElementById('previewBox').classList.remove('hidden');
});
</script>
</body>
</html>
