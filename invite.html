<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>결혼식 기본 정보</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:24px;color:#111}
.card{max-width:720px;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:12px}
label{display:block;margin:12px 0 4px;font-weight:600}
input,select{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box}
textarea{width:100%;min-height:60px;padding:10px;border:1px solid #ccc;border-radius:8px}
.row{display:flex;gap:8px}
.btn{padding:12px 16px;border:0;border-radius:8px;cursor:pointer}
.btn.primary{background:#111;color:#fff}
.preview{white-space:pre-wrap;border:1px solid #ccc;padding:12px;border-radius:8px;background:#f9f9f9;margin-top:12px}
.hidden{display:none}
</style>
</head>
<body>
<div class="card">
  <h2>결혼식 정보 입력</h2>

  <!-- 모바일 청첩장 -->
  <label><input type="checkbox" id="noInvite" /> 모바일청첩장 없음</label>
  <div id="urlWrap">
    <label>모바일 청첩장 URL</label>
    <input id="inviteUrl" placeholder="https://..." />
    <button class="btn" id="btnExtract" type="button">정보 가져오기</button>
  </div>

  <!-- 수기 입력 영역 -->
  <div id="manualWrap" class="hidden">
    <label>신랑측 *</label>
    <input id="groomInfo" placeholder="예: 서광훈 ∙ 정현순 의 아들 현종" />

    <label>신부측 *</label>
    <input id="brideInfo" placeholder="예: 유원형 ∙ 김희숙 의 딸 승아" />

    <label>예식일 *</label>
    <input type="date" id="eventDate" />

    <label>예식시간 *</label>
    <input type="time" id="eventTime" step="600" />

    <label>예식장 *</label>
    <input id="venue" placeholder="예: 라마다 서울 신도림 호텔 세인트그레이스홀" />

    <label>예식장 주소 *</label>
    <textarea id="venueAddr" placeholder="서울 구로구 경인로 624, TEL: 02-2162-2100"></textarea>

    <label>스몰웨딩 여부 *</label>
    <select id="isSmallWedding">
      <option value="">선택</option><option>예</option><option>아니오</option>
    </select>
  </div>

  <button type="button" class="btn" id="btnPreview">미리보기</button>
  <div id="previewBox" class="preview hidden"></div>

  <button class="btn primary" id="goWedding">추가 정보 입력</button>
</div>

<script>
// 청첩장 없음 체크 시 수기 입력 오픈
document.getElementById('noInvite').addEventListener('change', e=>{
  document.getElementById('urlWrap').classList.toggle('hidden', e.target.checked);
  document.getElementById('manualWrap').classList.toggle('hidden', !e.target.checked);
});

// TODO: fetch로 URL 분석 → boardText 표시 (생략)

// 미리보기 (수기 입력용)
document.getElementById('btnPreview').addEventListener('click', ()=>{
  const groom=document.getElementById('groomInfo').value;
  const bride=document.getElementById('brideInfo').value;
  const date=document.getElementById('eventDate').value;
  const time=document.getElementById('eventTime').value;
  const venue=document.getElementById('venue').value;
  const addr=document.getElementById('venueAddr').value;

  const preview=`${groom}
${bride}
□ 일 시 : ${date} ${time}
□ 장 소 : ${venue}
           (${addr})`;

  const box=document.getElementById('previewBox');
  box.textContent=preview;
  box.classList.remove('hidden');

  // localStorage 저장
  localStorage.setItem('inviteExtract', JSON.stringify({
    groomInfo:groom, brideInfo:bride, eventDate:date, eventTime:time,
    venue:venue, venueAddr:addr, isSmallWedding:document.getElementById('isSmallWedding').value
  }));
});

// wedding.html 이동
document.getElementById('goWedding').addEventListener('click', ()=>{
  location.href='wedding.html';
});
</script>
</body>
</html>
